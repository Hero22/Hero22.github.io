---
title: 泛型中的extend和super
date: 2020-04-29 16:13:28
tags:
- 泛型
- generics
---

在`java`中经常会看到泛型中使用`<? extends T>/<? super T>` ，这个[回答](https://stackoverflow.com/questions/4343202/difference-between-super-t-and-extends-t-in-java)很好，这里记下我看后的思考。

<!--more-->

### < ? extends T>

当声明了这样的一个泛型后，实际上其可以指向`T`或其子类的泛型，主要的一个点是**在运行之前，无法确定到底指向的是哪个类型的泛型**：

1. 这时`JVM`为了避免实际指向的类型`Tsub1`和你想放进去的类型`Tsub2`产生冲突，所以干脆就**不让**`put`了。
2. 但是读取的时候，完全可以按照`T`来读取所有的内容，可以理解为多态，父类型引用指向子类型对象，一样可以操作，所以**可以**`get`.

### <? super T>

这样声明的话，实际上可以指向`T`或其父类的泛型，同样**运行之前无法确定实际指向的类型**：

1. 不论指向的是`T`或其父类型，都能保证`T`或其子类**可以**`put`进去，同样是父类引用指向子类对象，没毛病。
2. 但是读取的时候就出现问题了，如果不考虑根父类`Object`，不同类型的东西读出来的时候没有一个统一的类型，不像上边可以统一按照类型`T`读取。真的想拿出的话就只能按`Object`拿了。

### PECS

一般这个东西都会带一起看，是`Producer Extends， Consumer Super`的简称，这句话站在**集合**的角度看比较容易理解

1. 如果集合作为`Producer`，那么其他的消费者就要从这个集合中拿东西，相当与`get`多，就选用`extends`
2. 如果集合作为`Consumer`，那么它就要从别的生产者那里拿东西放到自己里边，相当于`put`多，就选用`super`

